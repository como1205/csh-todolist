# E2E 테스트 가이드

## 테스트 환경 설정

### 사전 준비
- 프론트엔드: http://localhost:5175 (Vite React App)
- 백엔드: http://localhost:3000 (Express API)
- 데이터베이스: PostgreSQL (Supabase)

### 테스트 시작 전 체크리스트
- [ ] 백엔드 서버가 정상 실행 중
- [ ] 데이터베이스 연결 정상
- [ ] 프론트엔드 서버가 정상 실행 중
- [ ] 브라우저 캐시 및 로컬스토리지 클리어 (필요시)
- [ ] 테스트용 이메일 계정 준비

---

## 시나리오 1: 회원가입 → 로그인 → 로그아웃

### 목적
사용자 인증 플로우가 정상적으로 작동하는지 확인

### 테스트 단계

#### 1.1 회원가입
1. 브라우저에서 http://localhost:5175/register 접속
2. 다음 정보 입력:
   - **이메일**: test-[현재시간]@example.com (예: test-1234@example.com)
   - **비밀번호**: password123
   - **비밀번호 확인**: password123
   - **사용자 이름**: 테스트사용자
3. "회원가입" 버튼 클릭

**예상 결과:**
- ✅ 회원가입 성공 메시지 표시
- ✅ 녹색 체크 아이콘과 "회원가입 완료!" 메시지 확인
- ✅ 2초 후 자동으로 `/login` 페이지로 리다이렉트

**실패 시나리오:**
- ❌ 에러 메시지가 표시되면 실패 (에러 내용 기록)

#### 1.2 로그인
1. `/login` 페이지에서 대기
2. 방금 생성한 계정 정보 입력:
   - **이메일**: test-[현재시간]@example.com
   - **비밀번호**: password123
3. "로그인" 버튼 클릭

**예상 결과:**
- ✅ 로그인 성공
- ✅ `/` (메인 페이지)로 자동 리다이렉트
- ✅ 헤더 우측 상단에 사용자 이름 표시 (예: "테스트사용자")
- ✅ 할일 목록 페이지 표시 (빈 상태 메시지 또는 목록)

**실패 시나리오:**
- ❌ 에러 메시지 표시되면 실패
- ❌ 리다이렉트되지 않으면 실패

#### 1.3 로그인 상태 확인
1. 헤더 우측 상단의 사용자 아바타/이름 클릭
2. 드롭다운 메뉴 확인

**예상 결과:**
- ✅ 드롭다운 메뉴가 열림
- ✅ "내 프로필" 메뉴 항목 표시
- ✅ "로그아웃" 메뉴 항목 표시 (빨간색)

#### 1.4 로그아웃
1. 드롭다운 메뉴에서 "로그아웃" 클릭

**예상 결과:**
- ✅ 즉시 `/login` 페이지로 리다이렉트
- ✅ 로그인 폼 표시
- ✅ localStorage에서 토큰 제거 확인 (개발자 도구로 확인)

**검증 방법:**
1. 개발자 도구 열기 (F12)
2. Application > Local Storage > http://localhost:5175
3. `accessToken`, `refreshToken`, `user` 키가 없어야 함

---

## 시나리오 2: 할일 CRUD

### 목적
할일의 생성, 조회, 수정, 삭제 기능이 정상 작동하는지 확인

### 사전 조건
- 로그인된 상태

### 테스트 단계

#### 2.1 할일 추가
1. 메인 페이지(`/`)에서 "할일 추가" 버튼 클릭
2. 모달이 열리면 다음 정보 입력:
   - **제목**: 테스트 할일 1
   - **내용**: 이것은 테스트 할일입니다.
   - **시작일**: 오늘 날짜 선택
   - **만료일**: 오늘 + 7일 선택
3. "저장" 버튼 클릭

**예상 결과:**
- ✅ 모달이 닫힘
- ✅ 할일 목록에 새 항목이 즉시 표시됨
- ✅ 할일 카드에 제목 "테스트 할일 1" 표시
- ✅ 체크박스가 비활성화 상태 (미완료)
- ✅ 날짜 정보 표시

**실패 시나리오:**
- ❌ 모달이 닫히지 않으면 실패
- ❌ 목록에 추가되지 않으면 실패

#### 2.2 여러 할일 추가
1. "할일 추가" 버튼으로 다음 할일들 추가:
   - **할일 2**: 제목만 입력 (내용, 날짜 생략)
   - **할일 3**: 제목과 시작일만 입력
   - **할일 4**: 제목과 만료일만 입력

**예상 결과:**
- ✅ 모든 할일이 정상 추가됨
- ✅ 선택적 필드(내용, 날짜)가 없어도 추가 가능
- ✅ 목록이 최신순으로 정렬됨

#### 2.3 할일 완료 상태 토글
1. "테스트 할일 1" 카드의 체크박스 클릭

**예상 결과:**
- ✅ 체크박스가 즉시 체크됨
- ✅ 제목에 취소선(line-through) 스타일 적용
- ✅ 카드 배경색 변경 (회색조)
- ✅ 로딩 없이 즉시 반영 (낙관적 업데이트)

2. 같은 체크박스 다시 클릭

**예상 결과:**
- ✅ 체크가 해제됨
- ✅ 제목의 취소선 제거
- ✅ 카드 배경색 원래대로 복구

**실패 시나리오:**
- ❌ 체크박스가 반응하지 않으면 실패
- ❌ 스타일이 변경되지 않으면 실패
- ❌ 에러 메시지 표시되면 실패

#### 2.4 할일 수정
1. "테스트 할일 1" 카드의 "수정" 버튼 (연필 아이콘) 클릭
2. 수정 모달에서 다음과 같이 변경:
   - **제목**: 수정된 테스트 할일
   - **내용**: 내용이 수정되었습니다.
3. "저장" 버튼 클릭

**예상 결과:**
- ✅ 모달이 닫힘
- ✅ 목록에서 해당 할일의 제목이 "수정된 테스트 할일"로 즉시 변경
- ✅ 카드 클릭 시 수정된 내용 확인 가능

**실패 시나리오:**
- ❌ 변경사항이 반영되지 않으면 실패
- ❌ 에러 메시지 표시되면 실패

#### 2.5 할일 삭제
1. "할일 2" 카드의 "삭제" 버튼 (휴지통 아이콘) 클릭
2. 확인 다이얼로그에서 "확인" 클릭

**예상 결과:**
- ✅ 확인 다이얼로그 표시: "이 할일을 삭제하시겠습니까?"
- ✅ 확인 클릭 시 목록에서 즉시 사라짐
- ✅ 다른 할일들은 그대로 유지

**실패 시나리오:**
- ❌ 다이얼로그가 표시되지 않으면 실패
- ❌ 할일이 삭제되지 않으면 실패

---

## 시나리오 3: 휴지통 기능

### 목적
삭제된 할일의 복원 및 영구 삭제 기능 확인

### 사전 조건
- 로그인된 상태
- 최소 1개 이상의 할일이 삭제된 상태

### 테스트 단계

#### 3.1 휴지통 페이지 접속
1. 좌측 사이드바(데스크톱) 또는 하단 네비게이션(모바일)에서 "휴지통" 클릭

**예상 결과:**
- ✅ `/trash` 페이지로 이동
- ✅ 삭제된 할일 목록 표시
- ✅ 노란색 안내 메시지: "삭제된 할일은 이곳에 보관됩니다..."
- ✅ 이전에 삭제한 "할일 2" 표시

**빈 상태 확인:**
- 삭제된 할일이 없다면:
  - ✅ 휴지통 아이콘과 "휴지통이 비어있습니다" 메시지 표시

#### 3.2 할일 복원
1. "할일 2" 카드의 "복원" 버튼 클릭
2. 확인 다이얼로그에서 "확인" 클릭

**예상 결과:**
- ✅ 확인 다이얼로그 표시: "이 할일을 복원하시겠습니까?"
- ✅ 확인 클릭 시 휴지통 목록에서 즉시 사라짐

#### 3.3 복원 확인
1. 좌측 사이드바 또는 하단 네비게이션에서 "할일" 클릭
2. 메인 페이지(`/`)로 이동

**예상 결과:**
- ✅ 복원된 "할일 2"가 목록에 다시 표시됨
- ✅ 원래 상태(미완료)로 복원됨

#### 3.4 영구 삭제 테스트
1. 메인 페이지에서 "할일 3" 삭제
2. `/trash` 페이지로 이동
3. "할일 3" 카드의 "영구 삭제" 버튼 클릭
4. 경고 다이얼로그 확인

**예상 결과:**
- ✅ 경고 다이얼로그 표시: "정말로 영구 삭제하시겠습니까?\n\n이 작업은 되돌릴 수 없습니다."
- ✅ 확인 클릭 시 휴지통 목록에서 완전히 사라짐
- ✅ 메인 페이지로 돌아가도 복원 불가

**검증:**
1. 휴지통 페이지 새로고침 (F5)
2. "할일 3"이 여전히 없어야 함

---

## 시나리오 4: 에러 처리

### 목적
잘못된 입력 및 예외 상황에 대한 에러 처리 확인

### 테스트 단계

#### 4.1 회원가입 유효성 검증

**테스트 4.1.1: 잘못된 이메일 형식**
1. `/register` 페이지 접속
2. 이메일 입력: `invalid-email`
3. 다른 필드 정상 입력
4. "회원가입" 버튼 클릭

**예상 결과:**
- ✅ 에러 메시지 표시: "올바른 이메일 형식이 아닙니다"
- ✅ 이메일 입력 필드에 빨간색 테두리
- ✅ 폼 제출되지 않음

**테스트 4.1.2: 비밀번호 불일치**
1. 이메일: test@example.com
2. 비밀번호: password123
3. 비밀번호 확인: different123
4. 사용자 이름: 테스트
5. "회원가입" 버튼 클릭

**예상 결과:**
- ✅ 에러 메시지 표시: "비밀번호가 일치하지 않습니다"
- ✅ 비밀번호 확인 필드에 빨간색 테두리
- ✅ 폼 제출되지 않음

**테스트 4.1.3: 짧은 비밀번호**
1. 비밀번호: 123
2. 비밀번호 확인: 123
3. 다른 필드 정상 입력
4. "회원가입" 버튼 클릭

**예상 결과:**
- ✅ 에러 메시지: "비밀번호는 최소 6자 이상이어야 합니다"

**테스트 4.1.4: 짧은 사용자 이름**
1. 사용자 이름: A (1글자)
2. 다른 필드 정상 입력
3. "회원가입" 버튼 클릭

**예상 결과:**
- ✅ 에러 메시지: "사용자 이름은 최소 2자 이상이어야 합니다"

#### 4.2 로그인 유효성 검증

**테스트 4.2.1: 잘못된 이메일 형식**
1. `/login` 페이지 접속
2. 이메일: invalid-email
3. 비밀번호: password123
4. "로그인" 버튼 클릭

**예상 결과:**
- ✅ 에러 메시지: "올바른 이메일 형식이 아닙니다"

**테스트 4.2.2: 잘못된 비밀번호**
1. 이메일: 존재하는 계정
2. 비밀번호: wrongpassword
3. "로그인" 버튼 클릭

**예상 결과:**
- ✅ 에러 메시지 표시 (백엔드에서 반환하는 메시지)
- ✅ 빨간색 알림 박스로 표시

#### 4.3 할일 입력 유효성 검증

**테스트 4.3.1: 빈 제목**
1. 로그인 후 메인 페이지
2. "할일 추가" 버튼 클릭
3. 제목 비워둠
4. 내용만 입력: "내용만 있음"
5. "저장" 버튼 클릭

**예상 결과:**
- ✅ 에러 메시지: "제목을 입력해주세요"
- ✅ 제목 필드에 빨간색 테두리
- ✅ 모달이 닫히지 않음

**테스트 4.3.2: 제목 길이 초과**
1. 제목에 201자 이상 입력
2. "저장" 버튼 클릭

**예상 결과:**
- ✅ 에러 메시지: "제목은 200자 이하여야 합니다"

**테스트 4.3.3: 만료일이 시작일보다 이전**
1. 제목: "날짜 테스트"
2. 시작일: 2025-12-31
3. 만료일: 2025-01-01
4. "저장" 버튼 클릭

**예상 결과:**
- ✅ 에러 메시지: "만료일은 시작일보다 이후여야 합니다"
- ✅ 만료일 필드에 빨간색 테두리

---

## 시나리오 5: 로딩 및 빈 상태

### 목적
로딩 상태와 빈 상태 UI가 적절히 표시되는지 확인

### 테스트 단계

#### 5.1 빈 상태 - 할일 없음
1. 새로운 계정으로 회원가입/로그인
2. 메인 페이지(`/`) 접속

**예상 결과:**
- ✅ 클립보드 아이콘 표시
- ✅ "할일이 없습니다" 제목 표시
- ✅ "새로운 할일을 추가해보세요!" 안내 메시지
- ✅ "첫 할일 추가하기" 버튼 표시
- ✅ 버튼 클릭 시 할일 추가 모달 열림

#### 5.2 빈 상태 - 휴지통 비어있음
1. `/trash` 페이지 접속 (삭제된 할일이 없는 경우)

**예상 결과:**
- ✅ 휴지통 아이콘 표시
- ✅ "휴지통이 비어있습니다" 메시지
- ✅ "삭제된 할일이 없습니다" 부제목

#### 5.3 로딩 상태
1. 메인 페이지 접속 시 네트워크 속도를 늦춤
   - 개발자 도구 > Network > Throttling > Slow 3G
2. 페이지 새로고침

**예상 결과:**
- ✅ 로딩 스피너 표시 (회전하는 원형 아이콘)
- ✅ "로딩 중..." 텍스트 표시
- ✅ 데이터 로드 완료 후 스피너 사라짐

#### 5.4 버튼 로딩 상태
1. 할일 추가 모달 열기
2. 제목 입력
3. "저장" 버튼 클릭
4. 버튼 상태 관찰

**예상 결과:**
- ✅ 버튼 텍스트가 "저장" → (로딩 상태) 변경
- ✅ 버튼이 비활성화됨 (클릭 불가)
- ✅ 저장 완료 후 원래 상태로 복구

---

## 반응형 디자인 테스트

### 목적
다양한 화면 크기에서 UI가 적절히 동작하는지 확인

### 테스트 단계

#### 6.1 모바일 (< 768px)

**테스트 환경 설정:**
1. 개발자 도구 열기 (F12)
2. 디바이스 툴바 토글 (Ctrl+Shift+M)
3. iPhone SE (375x667) 선택

**확인 사항:**
- ✅ 헤더가 모바일에 맞게 조정됨
- ✅ 페이지 제목이 숨겨짐 (md:block)
- ✅ 사용자 이름이 작은 화면에서 숨겨짐 (sm:block)
- ✅ 하단 네비게이션 바가 표시됨
- ✅ 하단 네비게이션에 4개 메뉴 표시: 할일, 휴지통, 국경일, 프로필
- ✅ 콘텐츠가 하단 네비게이션에 가려지지 않음 (padding-bottom 확인)
- ✅ 모달이 풀스크린으로 표시됨
- ✅ 버튼 터치 크기가 충분함 (최소 44x44px)
- ✅ 할일 카드가 세로로 쌓임

**할일 추가 테스트:**
1. 우측 상단 "할일 추가" 버튼 클릭
2. 모달이 화면에 맞게 표시되는지 확인
3. 키보드 입력 시 스크롤 가능한지 확인

#### 6.2 태블릿 (768px ~ 1024px)

**테스트 환경 설정:**
1. iPad (768x1024) 선택

**확인 사항:**
- ✅ 하단 네비게이션 바가 여전히 표시됨
- ✅ 레이아웃이 적절히 조정됨
- ✅ 모달 크기가 화면에 맞게 조정됨
- ✅ 페이지 제목이 표시됨 (md:block)

#### 6.3 데스크톱 (> 1024px)

**테스트 환경 설정:**
1. Responsive 모드에서 1920x1080으로 설정

**확인 사항:**
- ✅ 좌측 사이드바가 표시됨 (lg:block)
- ✅ 하단 네비게이션 바가 숨겨짐 (lg:hidden)
- ✅ 사이드바에 4개 메뉴 표시: 할일 목록, 휴지통, 국경일, 프로필
- ✅ 사이드바 너비 256px (w-64)
- ✅ 콘텐츠가 최대 너비 제한됨 (max-w-7xl)
- ✅ 모달이 중앙에 적절한 크기로 표시됨
- ✅ 사이드바 메뉴의 활성 상태 표시 (색상 변경)

#### 6.4 반응형 테스트 - 화면 크기 전환
1. 브라우저 창 크기를 1920px → 768px → 375px로 조절

**예상 결과:**
- ✅ 1024px 이하에서 사이드바가 사라지고 하단 네비게이션 표시
- ✅ 레이아웃이 깨지지 않음
- ✅ 모든 기능이 정상 작동

---

## 브라우저 호환성 테스트

### 목적
주요 브라우저에서 정상 작동 확인

### 테스트 브라우저
- [ ] Chrome (최신 버전)
- [ ] Firefox (최신 버전)
- [ ] Edge (최신 버전)
- [ ] Safari (Mac/iOS)

### 각 브라우저에서 확인할 항목
1. **기본 기능:**
   - ✅ 회원가입/로그인
   - ✅ 할일 CRUD
   - ✅ 휴지통 기능

2. **UI/UX:**
   - ✅ CSS 스타일이 정상 표시됨
   - ✅ 애니메이션/트랜지션이 부드러움
   - ✅ 폰트가 정상 표시됨

3. **JavaScript:**
   - ✅ 모든 이벤트 핸들러 작동
   - ✅ API 호출 정상
   - ✅ 에러 처리 정상

---

## 접근성 테스트

### 목적
키보드 네비게이션 및 스크린 리더 호환성 확인

### 테스트 단계

#### 7.1 키보드 네비게이션
1. 마우스 없이 Tab 키만으로 페이지 탐색

**확인 사항:**
- ✅ Tab 키로 모든 상호작용 요소에 접근 가능
- ✅ 포커스 표시가 명확함 (outline 또는 ring)
- ✅ 모달 열릴 때 첫 번째 입력 필드로 포커스 이동
- ✅ Esc 키로 모달 닫기 가능
- ✅ Enter 키로 버튼 클릭 가능
- ✅ 드롭다운 메뉴가 키보드로 탐색 가능

#### 7.2 폼 레이블
1. 개발자 도구로 모든 input 요소 확인

**확인 사항:**
- ✅ 모든 input에 연결된 label 존재
- ✅ label의 htmlFor와 input의 id가 일치
- ✅ 버튼에 적절한 aria-label (필요한 경우)

#### 7.3 에러 메시지 접근성
1. 의도적으로 폼 에러 발생
2. 에러 메시지 확인

**확인 사항:**
- ✅ 에러 메시지가 role="alert"로 표시됨
- ✅ 에러가 발생한 필드로 포커스 이동 또는 명확한 표시

---

## 성능 테스트

### 목적
페이지 로딩 속도 및 반응성 확인

### 테스트 단계

#### 8.1 초기 로딩 시간
1. 네트워크 탭 열기
2. 페이지 새로고침
3. DOMContentLoaded 및 Load 시간 확인

**목표:**
- ✅ DOMContentLoaded < 1초
- ✅ Load < 3초

#### 8.2 API 응답 시간
1. Network 탭에서 API 호출 확인

**목표:**
- ✅ 로그인 API < 500ms
- ✅ Todo 목록 조회 < 300ms
- ✅ Todo 생성/수정/삭제 < 500ms

#### 8.3 대량 데이터 테스트
1. 50개 이상의 할일 추가
2. 스크롤 성능 확인

**예상 결과:**
- ✅ 스크롤이 부드러움 (60fps)
- ✅ 메모리 누수 없음

---

## 보안 테스트

### 목적
기본적인 보안 요구사항 충족 확인

### 테스트 단계

#### 9.1 토큰 관리
1. 로그인 후 개발자 도구 > Application > Local Storage
2. accessToken, refreshToken 확인

**확인 사항:**
- ✅ 토큰이 localStorage에 저장됨
- ✅ 로그아웃 시 토큰이 제거됨

#### 9.2 인증 보호
1. 로그아웃 상태에서 `/` 직접 접속 시도

**예상 결과:**
- ✅ `/login`으로 리다이렉트됨

2. 로그인 상태에서 `/login` 접속 시도

**예상 결과:**
- ✅ `/`로 리다이렉트됨

#### 9.3 401 에러 처리
1. localStorage에서 accessToken을 임의로 수정
2. API 호출하는 작업 수행 (할일 추가 등)

**예상 결과:**
- ✅ 토큰 재발급 시도
- ✅ 재발급 실패 시 로그아웃 및 로그인 페이지로 이동

---

## 테스트 결과 기록

각 시나리오 테스트 후 아래 표에 결과를 기록하세요.

| 시나리오 | 통과 | 실패 | 버그 ID | 비고 |
|---------|------|------|---------|------|
| 1. 회원가입→로그인→로그아웃 | ⬜ | ⬜ | | |
| 2. 할일 CRUD | ⬜ | ⬜ | | |
| 3. 휴지통 기능 | ⬜ | ⬜ | | |
| 4. 에러 처리 | ⬜ | ⬜ | | |
| 5. 로딩 및 빈 상태 | ⬜ | ⬜ | | |
| 6. 반응형 디자인 | ⬜ | ⬜ | | |
| 7. 접근성 | ⬜ | ⬜ | | |
| 8. 성능 | ⬜ | ⬜ | | |
| 9. 보안 | ⬜ | ⬜ | | |

---

## 버그 리포트 템플릿

발견된 버그는 다음 형식으로 기록하세요:

```
버그 ID: BUG-001
제목: [간단한 설명]
심각도: Critical / High / Medium / Low
재현 단계:
1. [단계 1]
2. [단계 2]
3. [단계 3]

예상 결과:
[예상되는 동작]

실제 결과:
[실제 발생한 동작]

스크린샷:
[스크린샷 첨부]

환경:
- 브라우저:
- OS:
- 화면 크기:

추가 정보:
[기타 관련 정보]
```

---

## 테스트 완료 조건

다음 조건이 모두 충족되면 E2E 테스트 통과:

- [ ] 모든 MVP 핵심 기능 시나리오 (1~3) 통과
- [ ] 에러 처리 (시나리오 4) 통과
- [ ] 로딩 및 빈 상태 (시나리오 5) 통과
- [ ] 모바일, 태블릿, 데스크톱 반응형 테스트 통과
- [ ] 최소 2개 이상의 브라우저에서 정상 작동 확인
- [ ] Critical 버그 0개
- [ ] High 버그 0개

---

## 참고사항

- 테스트는 최소 2회 이상 반복하여 일관성 확인
- 네트워크 에러 시뮬레이션도 수행 (Network 탭에서 Offline 모드)
- 실제 사용자 시나리오를 추가로 고려
- 발견된 모든 버그는 즉시 문서화
